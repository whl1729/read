# Composing Programs 课程分析笔记

## 1 Building Abstractions with Functions

### 这一章的主题是什么

通过函数来建立抽象

### 这一章的大纲是什么

- 编程要素
- 定义新函数
- 设计函数
- 控制
- 高阶函数
- 递归函数

### 目前为止我知道什么

- 我知道 C/C++/JavaScript/Python/Go 等语言中是怎么定义新函数的
- 我知道设计函数的一些基本原则
  - 一个函数应该只做一件事情
  - 函数名字可读性要好，做到「自注释」
  - 函数参数尽量不要超过5个，超过5个时可以考虑封装成结构体等
  - 函数参数设计要注意效率，避免复制大量数据
- 一门编程语言支持的控制流包括
  - 分支（if、switch/case）
  - 循环（for、while）
  - 异常处理（try/catch）
  - 协程（goroutine）
  - 多线程（threading）
  - 多进程（subprocess）
- 高阶函数是指参数或返回值也是函数的函数。
- 递归函数是指函数内部调用自身的函数，一个经典的例子是计算 Fibonacci 数列。

### 这一章的主要内容是什么

#### 编程要素

- 关注语言的构建方法
  - 学习一门语言时，要重点关注这门语言是如何将简单的 idea 构建成复杂的 idea

- 语言的构建方法
  - 原始的表达式和语句
  - 组合方法
  - 抽象方法

> 伍注：
>
> C语言的组合方法有：
> 1. 将基本类型组合成结构体（struct）
> 2. 将多个语句组合成循环体
> 3. 将多个语句组合成函数
>
> C语言的抽象方法有：
> 1. 封装成函数

- 编程的两个基本要素
  - 函数
  - 数据

- 任何一门强大的编程语言的基本要求
  - 支持数据表示
  - 支持函数
  - 提供一些组合和抽象两者（数据与函数）的途径

- Python 组合方法
  - 使用数字和数学运算符组合出复杂表达式
  - 最重要的复合表达式是函数调用表达式
  - 函数调用可以嵌套组合出复杂表达式
  - 将函数和数据组合成一个类
  - 将函数和数据组合成一个模块

- Python 抽象方法
  - 赋值：最简单的抽象方法。用一个名字指代复杂运算的取值
  - 函数定义：更强大的抽象方法。用一个名字指代一些复合的运算

- 环境
  - 某些内存，维护名字、取值和绑定关系等信息

- 非纯函数
  - 纯函数：只返回结果，无任何副作用
  - 非纯函数：除了返回结果之外，有副作用。比如 print 函数（副作用是会打印东西）

#### 定义新函数

- 函数抽象的3个核心属性
  - 定义域（domain）：输入参数的集合
  - 值域（range）：返回参数的集合
  - 意图（intent）：输入与输出之间的关系

#### 设计函数

- 好函数的特点
  - 每个函数应该只做一件事情
  - DIY：重复代码应该封装为函数
  - 应该定义足够通用的函数

#### 控制

- 控制语句
  - 基于逻辑比较来控制程序执行流

- 语句
  - 简单语句：单行，末尾不含冒号。比如：表达式、return 语句、赋值语句
  - 复合语句：多行，第一行为 header，末尾含冒号。比如：def 语句

#### 高阶函数

- 定义
  - 高阶函数是操纵函数的函数
