# 《MySQL 必知必会》教程分析笔记

## 第9章 时间函数：时间类数据，MySQL 是怎么处理的？

### Q1：这一章的内容属于哪一类别？

数据库/MySQL。

### Q2：这一章的内容是什么？

解释 MySQL 时间函数的用法。

### Q3：这一章的大纲是什么？

- 获取日期时间数据中部分信息的函数
- 计算日期时间的函数
- 其他日期时间函数

### Q4：作者想要解决什么问题？

如何处理时间类数据？

### Q5：这一章的关键词是什么？

### Q6：这一章的关键句是什么？

- 获取日期时间数据中部分信息的函数
  - `EXTRACT()`: 获取日期时间中指定的值, eg: `extract(hour from curtime())`
  - `HOUR()`: 获取小时，eg: `hour(curtime())`
  - `YEAR()`
  - `MONTH()`
  - `DAY()`
  - `MINUTE()`
  - `SECOND()`

- 计算日期时间的函数
  - `DATE_ADD()` or `ADDDATE()`: 给指定日期增加一定时间间隔
  - `DATE_SUB()` or `SUBDATE()`: 与`DARE_ADD`类似，但是方向相反
  - `DATEDIFF()`: 计算2个时间点之间相隔的天数
  - `LAST_DAY()`: 计算给定时间点当月最后一天的日期

- 其他日期时间函数
  - `CURDATE()`: 获取当前日期（年月日）
  - `CURTIME()`: 获取当前时间（时分秒）
  - `DAYOFWEEK()`: 获取今天是星期几，周日为1，周一为2，以此类推。
  - `WEEKDAY()`: 获取今天是星期几，周一为0，周一为1，以此类推。
  - `DATE_FORMAT()`: 格式化日期时间。跟 Linux 的 date 命令格式类似，也是用`%`作为前缀。

- 时间校准 vs 系统可靠性
  - MySQL 中获取的时间，其实就是 MySQL 服务器计算机的系统时间。
  - 如果你的系统有一定规模，需要在多台计算机上运行，就要注意时间校准的问题。
  - 比如我们的信息系统受门店经营环境和操作人员的素质所限，有时会遇到误操作、停电等故障而导致的计算机系统时间失准问题。
    这对整个信息系统的可靠性影响非常大。

- 解决时间校准问题
  - 可以利用 Windows 系统自带的网络同步的方式，来校准系统时间。
  - 门店统一从总部 MySQL 服务器获取时间。
    由于总部的服务器的配置和运维状况一般要好于门店，所以系统时间出现误差的可能性也较小。
    如果采用云服务器，系统时间的可靠性会更高。
