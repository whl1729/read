# 《MySQL 必知必会》教程分析笔记

## 第2章 字段：这么多字段类型，该如何定义？

### Q1：这一章的内容属于哪一类别？

数据库/MySQL。

### Q2：这一章的内容是什么？

介绍数据库的各种数据类型。

### Q3：这一章的大纲是什么？

- 整数类型
- 浮点数类型和定点数类型
- 文本类型
- 日期与时间类型
- 修改数据类型

### Q4：作者想要解决什么问题？

业务开发中，如何选择哪种数据类型？

### Q5：这一章的关键词是什么？

### Q6：这一章的关键句是什么？

#### 整数类型

- 在评估用哪种整数类型的时候，你需要考虑存储空间和可靠性的平衡问题：
  - 一方面，用占用字节数少的整数类型可以节省存储空间；
  - 另一方面，要是为了节省存储空间，使用的整数类型取值范围太小，一旦遇到超出取值范围的情况，就可能引起系统错误，影响可靠性。

- 首先确保数据不会超过取值范围，在这个前提之下，再去考虑如何节省存储空间。

#### 浮点数类型和定点数类型

- 浮点数类型有个缺陷，就是不精准。因此，在一些对精确度要求较高的项目中，千万不要使用浮点数，不然会导致结果错误，甚至是造成不可挽回的损失。

- 定点数类型 DECIMAL
  - DECIMAL 是把十进制数的整数部分和小数部分拆开，分别转换成十六进制数，进行存储。
    这样，所有的数值，就都可以精准表达了，不会存在因为无法表达而损失精度的问题。
  - MySQL 用`DECIMAL（M,D）`的方式表示高精度小数。其中，M 表示整数部分加小数部分一共有多少位，`M <= 65`。D 表示小数部分位数，`D<M`.

#### 文本类型

- 由于实际存储的长度不确定，MySQL 不允许 TEXT 类型的字段做主键。遇到这种情况，你只能采用 CHAR(M)，或者 VARCHAR(M)。

- 建议：在你的项目中，只要不是主键字段，就可以按照数据可能的最大长度，选择这几种 TEXT 类型中的的一种，作为存储字符串的数据类型。

#### 日期与时间类型

- DATETIME 日期格式：`YYYY-MM-DD HH:MM:SS`

- 建议：为了确保数据的完整性和系统的稳定性，优先考虑使用 DATETIME 类型。
  因为虽然 DATETIME 类型占用的存储空间最多，但是它表达的时间最为完整，取值范围也最大。

- 为什么时间类型 TIME 的取值范围不是`-23:59:59～23:59:59`呢（TIME的取值范围是`-838:59:59 ~ +838：59：59`）？
  - 原因是 MySQL 设计的 TIME 类型，不光表示一天之内的时间，而且可以用来表示一个时间间隔，这个时间间隔可以超过 24 小时。

#### 修改数据类型

```sql
ALTER TABLE demo.goodsmaster
MODIFY COLUMN price DOUBLE;
```
