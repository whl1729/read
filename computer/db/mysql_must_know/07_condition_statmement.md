# 《MySQL 必知必会》教程分析笔记

## 第7章 条件语句：WHERE 与 HAVING 有何不同

### Q1：这一章的内容属于哪一类别

数据库/MySQL。

### Q2：这一章的内容是什么

介绍 MySQL 条件语句的基础知识。

### Q3：这一章的大纲是什么

- 一个实际查询需求
- WHERE
- HAVING
- 怎么正确地使用 WHERE 和 HAVING

### Q4：作者想要解决什么问题

- 如何使用条件语句对查询结果进行筛选？
- 怎么正确地使用 WHERE 和 HAVING？

### Q5：这一章的关键词是什么

- WHERE
- HAVING

### Q6：这一章的关键句是什么

- 用法对比：WHERE vs HAVING
  - WHERE 是直接对表中的字段进行限定，来筛选结果；
  - HAVING 则需要跟分组关键字 GROUP BY 一起使用，通过对分组字段或分组计算函数进行限定，来筛选结果。

- 性能对比：WHERE vs HAVING
  - 如果需要通过连接从关联表中获取需要的数据，WHERE 是先筛选后连接，而 HAVING 是先连接后筛选。
  - 这一点，就决定了在关联查询中，WHERE 比 HAVING 更高效。
    因为 WHERE 可以先筛选，用一个筛选后的较小数据集和关联表进行连接，这样占用的资源比较少，执行效率也就比较高。
    HAVING 则需要先把结果集准备好，也就是用未被筛选的数据集进行关联，然后对这个大的数据集进行筛选，这样占用的资源就比较多，执行效率也较低。

- 功能对比：WHERE vs HAVING
  - WHERE 可以直接使用表中的字段作为筛选条件，但不能使用分组中的计算函数作为筛选条件；
    HAVING 必须要与 GROUP BY 配合使用，可以把分组计算的函数和分组字段作为筛选条件。
  - 这决定了，在需要对数据进行分组统计的时候，HAVING 可以完成 WHERE 不能完成的任务。

- 需要注意的是，WHERE 和 HAVING 也不是互相排斥的，我们可以在一个查询里面同时使用 WHERE 和 HAVING。
  - 把条件拆分开，包含分组统计函数的条件用 HAVING，普通条件用 WHERE。
  - 这样，我们就既利用了 WHERE 条件的高效快速，又发挥了 HAVING 可以使用包含分组统计函数的查询条件的优点。
  - 当数据量特别大的时候，运行效率会有很大的差别。
