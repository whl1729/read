# 《MySQL 必知必会》教程分析笔记

## 第8章 聚合函数：怎么高效地进行分组统计？

### Q1：这一章的内容属于哪一类别？

计算机/MySQL。

### Q2：这一章的内容是什么？

介绍聚合函数的用法。

### Q3：这一章的大纲是什么？

- SUM
- AVG, MAX, MIN
- COUNT

### Q4：作者想要解决什么问题？

如何使用聚合函数进行分组统计？

### Q5：这一章的关键词是什么？

- SUM
- AVG
- MAX
- MIN
- COUNT

### Q6：这一章的关键句是什么？

- 求和函数获取的是分组中的合计数据，所以你要对分组的结果有准确的把握，否则就很容易搞错。
  - 你要知道是按什么字段进行分组的。
  - 如果是按多个字段分组，你要知道字段之间有什么样的层次关系；
  - 如果是按照以字段作为变量的某个函数进行分组的，你要知道这个函数的返回值是什么，返回值又是如何影响分组的等。

- `LEFT(str，n)`：表示返回字符串 str 最左边的 n 个字符。

- 分页策略 vs `COUNT`
  - 不把查询的结果一次性全部返回给客户端，而是根据用户电脑屏幕的大小，计算一屏可以显示的记录数，每次只返回用户电脑屏幕可以显示的数据集。
  - 接着，再通过翻页、跳转等功能按钮，实现查询目标的精准锁定。这样一来，每次查询的数据量较少，也就大大提高了系统响应速度。
  - 这个策略能够实现的一个关键，就是要计算出符合条件的记录一共有多少条，之后才能计算出一共有几页、能不能翻页或跳转。这时就要用到 `COUNT`函数。

- `COUNT` 有两种用法
  - `COUNT(*)`：统计一共有多少条记录
    - 如果`COUNT(*)`与`GROUP BY`一起使用，就表示统计分组内有多少条数据。
    - 它也可以单独使用，这就相当于数据集全体是一个分组，统计全部数据集的记录数。
  - `COUNT(字段)`：用来统计分组内这个字段的值出现了多少次。如果字段值是空，就不统计。

- 聚合函数可以和其他关键字、函数一起使用，这样会拓展它的使用场景，让原本复杂的计算变简单。
  - 所以，不仅要掌握常见的聚合函数，还要掌握 MySQL 的各种关键字的功能和用法，
  - 并且根据实际工作的需要，尝试把它们组合在一起使用，这样就能利用好数据库的强大功能，更好地满足用户的需求。
